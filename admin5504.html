<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>관리자 페이지</title>
</head>
<body>
  <h2>논문 등록 (관리자 전용)</h2>
  <form id="paperForm">
    <label for="url">논문 URL:</label>
    <input type="text" id="url" name="url" required><br><br>
    
    <label for="category">카테고리:</label>
    <input type="text" id="category" name="category" required placeholder="예: International Journal"><br><br>
    
    <label for="event">학회/학술대회명:</label>
    <input type="text" id="event" name="event" required placeholder="예: IEEE TIFS"><br><br>
    
    <label for="title">논문 제목:</label>
    <input type="text" id="title" name="title" required><br><br>
    
    <label for="authors">저자명:</label>
    <input type="text" id="authors" name="authors" required><br><br>
    
    <label for="date">발행일 (예: Mar. 2024):</label>
    <input type="text" id="date" name="date" required><br><br>
    
    <label for="publication">출판사/저널명:</label>
    <input type="text" id="publication" name="publication" required><br><br>
    
    <label for="tags">#태그 (쉼표 구분):</label>
    <input type="text" id="tags" name="tags"><br><br>
    
    <input type="submit" value="등록">
  </form>
  <div id="message"></div>
  <br>
  <button id="logoutBtn">로그아웃</button>
  
  <script>
    document.getElementById('logoutBtn').addEventListener('click', function(){
      localStorage.removeItem('adminToken');
      window.location.href = 'login.html';
    });
  
    document.getElementById('paperForm').addEventListener('submit', function(e){
      e.preventDefault();
      const token = localStorage.getItem('adminToken');
      if (!token) {
        alert('로그인 후 이용해주세요.');
        window.location.href = 'login.html';
        return;
      }
      const paperData = {
        url: document.getElementById('url').value,
        category: document.getElementById('category').value,
        event: document.getElementById('event').value,
        title: document.getElementById('title').value,
        authors: document.getElementById('authors').value,
        date: document.getElementById('date').value,
        publication: document.getElementById('publication').value,
        tags: document.getElementById('tags').value
      };
      fetch('https://www.nameyee.me/api/add_paper', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify(paperData)
      })
      .then(response => {
        if (!response.ok) { throw new Error('등록 실패'); }
        return response.json();
      })
      .then(data => {
        document.getElementById('message').textContent = data.message;
        document.getElementById('paperForm').reset();
      })
      .catch(error => {
        document.getElementById('message').textContent = error.message;
      });
    });
  </script>
</body>
</html>
